<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Macros Overview</title>
</head>
<body>
    <h1>Macros</h1>
    <div>
        <p><strong>Calories:</strong> <span id="calories">N/A</span> kcal</p>
        <p><strong>Protein:</strong> <span id="protein">N/A</span> g</p>
        <p><strong>Carbs:</strong> <span id="carbs">N/A</span> g</p>
        <p><strong>Fats:</strong> <span id="fats">N/A</span> g</p>
    </div>
    <h2>Tips</h2>
    <ul>
        <li>On rest days, choose lower glycemic carbs for energy and recovery.</li>
        <li>Drink at least 2-3 liters of water daily to stay hydrated.</li>
        <li>Consume high glycemic carbs post-workout to replenish energy.</li>
        <li>Eat pre-workout meals 1-2 hours before training and post-workout meals within 30-60 minutes.</li>
    </ul>
    <h2>Recommended Foods</h2>
    <!-- Displaying the food recommendations (same as you had before) -->
    <div>
        <h3>Proteins</h3>
        <ul id="proteins"></ul>
        <h3>Complex Carbs</h3>
        <ul id="complex_carbs"></ul>
        <h3>Fats</h3>
        <ul id="fats_list"></ul>
        <h3>Vegetables</h3>
        <ul id="vegetables"></ul>
        <h3>Fruits</h3>
        <ul id="fruits"></ul>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", async () => {
            try {
                // Replace with your actual backend URL
                const response = await fetch("https://your-backend-service.onrender.com/api/calculate_macros");

                if (response.ok) {
                    const data = await response.json();
                    const macros = data.macros;
                    const foodChart = data.food_chart;

                    // Update the page with macro data
                    document.getElementById("calories").textContent = macros.calories || "N/A";
                    document.getElementById("protein").textContent = macros.protein || "N/A";
                    document.getElementById("carbs").textContent = macros.carbs || "N/A";
                    document.getElementById("fats").textContent = macros.fats || "N/A";

                    // Display the food recommendations dynamically
                    const foodCategories = ["Proteins", "Complex Carbs", "Fats", "Vegetables", "Fruits"];
                    foodCategories.forEach(category => {
                        const list = document.getElementById(category.toLowerCase().replace(/ /g, "_"));
                        foodChart[category].forEach(food => {
                            const listItem = document.createElement("li");
                            listItem.textContent = food;
                            list.appendChild(listItem);
                        });
                    });

                } else {
                    console.error("Failed to fetch macros:", response.statusText);
                    alert("Failed to fetch macro data. Please try again.");
                }
            } catch (error) {
                console.error("Error fetching macros:", error);
                alert("Network error. Please try again.");
            }
        });
    </script>
</body>
</html>

